{
  "asyncapi": "2.6.0",
  "info": {
    "title": "m5chat WebSocket API",
    "version": "1.0.0",
    "description": "Spec (workspace auth via JWT token in query)"
  },
  "servers": {
    "chat": {
      "url": "ws://localhost:5179/ws",
      "protocol": "ws",
      "description": "Chat + worktree websocket. Requires ?session=SESSION_ID and ?token=WORKSPACE_TOKEN"
    },
    "terminal": {
      "url": "ws://localhost:5179/terminal",
      "protocol": "ws",
      "description": "Terminal websocket. Requires ?session=SESSION_ID and ?token=WORKSPACE_TOKEN, optional &worktreeId=ID"
    }
  },
  "channels": {
    "/ws": {
      "parameters": {
        "session": {
          "description": "Session ID",
          "schema": {
            "type": "string"
          }
        },
        "token": {
          "description": "Workspace JWT token (24h)",
          "schema": {
            "type": "string"
          }
        }
      },
      "publish": {
        "summary": "Client -> Server",
        "message": {
          "$ref": "#/components/messages/ClientToServer"
        }
      },
      "subscribe": {
        "summary": "Server -> Client",
        "message": {
          "$ref": "#/components/messages/ServerToClient"
        }
      }
    },
    "/terminal": {
      "parameters": {
        "session": {
          "description": "Session ID",
          "schema": {
            "type": "string"
          }
        },
        "worktreeId": {
          "description": "Optional worktree id",
          "schema": {
            "type": "string"
          }
        },
        "token": {
          "description": "Workspace JWT token (24h)",
          "schema": {
            "type": "string"
          }
        }
      },
      "publish": {
        "summary": "Client -> Server",
        "message": {
          "$ref": "#/components/messages/TerminalClientToServer"
        }
      },
      "subscribe": {
        "summary": "Server -> Client",
        "message": {
          "$ref": "#/components/messages/TerminalServerToClient"
        }
      }
    }
  },
  "components": {
    "schemas": {
      "Provider": {
        "type": "string",
        "enum": [
          "codex",
          "claude"
        ]
      },
      "AttachmentRef": {
        "type": "object",
        "properties": {
          "name": {
            "type": "string"
          },
          "path": {
            "type": "string"
          },
          "size": {
            "type": "integer"
          }
        },
        "additionalProperties": true
      },
      "Message": {
        "type": "object",
        "properties": {
          "id": {
            "type": "string"
          },
          "role": {
            "type": "string"
          },
          "text": {
            "type": "string"
          },
          "attachments": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/AttachmentRef"
            }
          },
          "provider": {
            "$ref": "#/components/schemas/Provider"
          },
          "toolResult": {
            "type": "object"
          }
        },
        "additionalProperties": true
      },
      "RepoDiff": {
        "type": "object",
        "properties": {
          "status": {
            "type": "string"
          },
          "diff": {
            "type": "string"
          }
        },
        "additionalProperties": false
      },
      "RpcLogEntry": {
        "type": "object",
        "properties": {
          "direction": {
            "type": "string",
            "enum": [
              "stdin",
              "stdout"
            ]
          },
          "timestamp": {
            "type": "number"
          },
          "payload": {
            "type": "object"
          },
          "provider": {
            "$ref": "#/components/schemas/Provider"
          },
          "worktreeId": {
            "type": "string"
          }
        },
        "additionalProperties": true
      }
    },
    "messages": {
      "ClientToServer": {
        "oneOf": [
          {
            "$ref": "#/components/messages/Ping"
          },
          {
            "$ref": "#/components/messages/SyncMessages"
          },
          {
            "$ref": "#/components/messages/UserMessage"
          },
          {
            "$ref": "#/components/messages/WorktreeMessage"
          },
          {
            "$ref": "#/components/messages/CreateParallelRequest"
          },
          {
            "$ref": "#/components/messages/WorktreeTurnInterrupt"
          },
          {
            "$ref": "#/components/messages/SyncWorktreeMessages"
          },
          {
            "$ref": "#/components/messages/ListWorktrees"
          },
          {
            "$ref": "#/components/messages/TurnInterrupt"
          },
          {
            "$ref": "#/components/messages/ModelListRequest"
          },
          {
            "$ref": "#/components/messages/ModelSetRequest"
          },
          {
            "$ref": "#/components/messages/AccountLoginStart"
          },
          {
            "$ref": "#/components/messages/SwitchProvider"
          }
        ]
      },
      "ServerToClient": {
        "oneOf": [
          {
            "$ref": "#/components/messages/Pong"
          },
          {
            "$ref": "#/components/messages/Error"
          },
          {
            "$ref": "#/components/messages/Status"
          },
          {
            "$ref": "#/components/messages/Ready"
          },
          {
            "$ref": "#/components/messages/MessagesSync"
          },
          {
            "$ref": "#/components/messages/TurnStarted"
          },
          {
            "$ref": "#/components/messages/TurnCompleted"
          },
          {
            "$ref": "#/components/messages/TurnError"
          },
          {
            "$ref": "#/components/messages/TurnInterruptSent"
          },
          {
            "$ref": "#/components/messages/AssistantDelta"
          },
          {
            "$ref": "#/components/messages/AssistantMessage"
          },
          {
            "$ref": "#/components/messages/CommandExecutionDelta"
          },
          {
            "$ref": "#/components/messages/CommandExecutionCompleted"
          },
          {
            "$ref": "#/components/messages/ItemStarted"
          },
          {
            "$ref": "#/components/messages/RepoDiff"
          },
          {
            "$ref": "#/components/messages/WorktreeReady"
          },
          {
            "$ref": "#/components/messages/WorktreeStatus"
          },
          {
            "$ref": "#/components/messages/WorktreeDiff"
          },
          {
            "$ref": "#/components/messages/WorktreeCreated"
          },
          {
            "$ref": "#/components/messages/WorktreeRemoved"
          },
          {
            "$ref": "#/components/messages/WorktreeRenamed"
          },
          {
            "$ref": "#/components/messages/WorktreeMessagesSync"
          },
          {
            "$ref": "#/components/messages/WorktreesList"
          },
          {
            "$ref": "#/components/messages/ProviderSwitched"
          },
          {
            "$ref": "#/components/messages/ModelListResponse"
          },
          {
            "$ref": "#/components/messages/ModelSetResponse"
          },
          {
            "$ref": "#/components/messages/AccountLoginStarted"
          },
          {
            "$ref": "#/components/messages/AccountLoginError"
          },
          {
            "$ref": "#/components/messages/AccountLoginCompleted"
          },
          {
            "$ref": "#/components/messages/RpcLog"
          }
        ]
      },
      "Ping": {
        "name": "ping",
        "payload": {
          "type": "object",
          "properties": {
            "type": {
              "const": "ping"
            }
          },
          "required": [
            "type"
          ]
        }
      },
      "Pong": {
        "name": "pong",
        "payload": {
          "type": "object",
          "properties": {
            "type": {
              "const": "pong"
            }
          },
          "required": [
            "type"
          ]
        }
      },
      "Error": {
        "name": "error",
        "payload": {
          "type": "object",
          "properties": {
            "type": {
              "const": "error"
            },
            "message": {
              "type": "string"
            },
            "worktreeId": {
              "type": "string"
            }
          },
          "required": [
            "type",
            "message"
          ],
          "additionalProperties": true
        }
      },
      "Status": {
        "name": "status",
        "payload": {
          "type": "object",
          "properties": {
            "type": {
              "const": "status"
            },
            "message": {
              "type": "string"
            },
            "provider": {
              "$ref": "#/components/schemas/Provider"
            }
          },
          "required": [
            "type",
            "message"
          ],
          "additionalProperties": true
        }
      },
      "Ready": {
        "name": "ready",
        "payload": {
          "type": "object",
          "properties": {
            "type": {
              "const": "ready"
            },
            "threadId": {
              "type": "string"
            },
            "provider": {
              "$ref": "#/components/schemas/Provider"
            }
          },
          "required": [
            "type",
            "threadId"
          ],
          "additionalProperties": true
        }
      },
      "SyncMessages": {
        "name": "sync_messages",
        "payload": {
          "type": "object",
          "properties": {
            "type": {
              "const": "sync_messages"
            },
            "provider": {
              "$ref": "#/components/schemas/Provider"
            },
            "lastSeenMessageId": {
              "type": "string"
            }
          },
          "required": [
            "type"
          ],
          "additionalProperties": true
        }
      },
      "MessagesSync": {
        "name": "messages_sync",
        "payload": {
          "type": "object",
          "properties": {
            "type": {
              "const": "messages_sync"
            },
            "provider": {
              "$ref": "#/components/schemas/Provider"
            },
            "messages": {
              "type": "array",
              "items": {
                "$ref": "#/components/schemas/Message"
              }
            }
          },
          "required": [
            "type",
            "messages"
          ],
          "additionalProperties": true
        }
      },
      "UserMessage": {
        "name": "user_message",
        "payload": {
          "type": "object",
          "properties": {
            "type": {
              "const": "user_message"
            },
            "text": {
              "type": "string"
            },
            "displayText": {
              "type": "string"
            },
            "attachments": {
              "type": "array",
              "items": {
                "$ref": "#/components/schemas/AttachmentRef"
              }
            }
          },
          "required": [
            "type",
            "text"
          ],
          "additionalProperties": true
        }
      },
      "WorktreeMessage": {
        "name": "worktree_message",
        "payload": {
          "type": "object",
          "properties": {
            "type": {
              "const": "worktree_message"
            },
            "worktreeId": {
              "type": "string"
            },
            "text": {
              "type": "string"
            },
            "displayText": {
              "type": "string"
            },
            "attachments": {
              "type": "array",
              "items": {
                "$ref": "#/components/schemas/AttachmentRef"
              }
            }
          },
          "required": [
            "type",
            "worktreeId",
            "text"
          ],
          "additionalProperties": true
        }
      },
      "CreateParallelRequest": {
        "name": "create_parallel_request",
        "payload": {
          "type": "object",
          "properties": {
            "type": {
              "const": "create_parallel_request"
            },
            "provider": {
              "$ref": "#/components/schemas/Provider"
            },
            "name": {
              "type": "string"
            },
            "parentWorktreeId": {
              "type": "string"
            },
            "startingBranch": {
              "type": "string"
            },
            "text": {
              "type": "string"
            },
            "displayText": {
              "type": "string"
            },
            "model": {
              "type": "string"
            },
            "reasoningEffort": {
              "type": "string"
            }
          },
          "required": [
            "type",
            "provider"
          ],
          "additionalProperties": true
        }
      },
      "WorktreeTurnInterrupt": {
        "name": "worktree_turn_interrupt",
        "payload": {
          "type": "object",
          "properties": {
            "type": {
              "const": "worktree_turn_interrupt"
            },
            "worktreeId": {
              "type": "string"
            },
            "turnId": {
              "type": "string"
            }
          },
          "required": [
            "type",
            "worktreeId"
          ],
          "additionalProperties": true
        }
      },
      "SyncWorktreeMessages": {
        "name": "sync_worktree_messages",
        "payload": {
          "type": "object",
          "properties": {
            "type": {
              "const": "sync_worktree_messages"
            },
            "worktreeId": {
              "type": "string"
            }
          },
          "required": [
            "type",
            "worktreeId"
          ],
          "additionalProperties": true
        }
      },
      "WorktreeMessagesSync": {
        "name": "worktree_messages_sync",
        "payload": {
          "type": "object",
          "properties": {
            "type": {
              "const": "worktree_messages_sync"
            },
            "worktreeId": {
              "type": "string"
            },
            "messages": {
              "type": "array",
              "items": {
                "$ref": "#/components/schemas/Message"
              }
            },
            "status": {
              "type": "string"
            }
          },
          "required": [
            "type",
            "worktreeId",
            "messages"
          ],
          "additionalProperties": true
        }
      },
      "ListWorktrees": {
        "name": "list_worktrees",
        "payload": {
          "type": "object",
          "properties": {
            "type": {
              "const": "list_worktrees"
            }
          },
          "required": [
            "type"
          ]
        }
      },
      "WorktreesList": {
        "name": "worktrees_list",
        "payload": {
          "type": "object",
          "properties": {
            "type": {
              "const": "worktrees_list"
            },
            "worktrees": {
              "type": "array",
              "items": {
                "type": "object"
              }
            }
          },
          "required": [
            "type",
            "worktrees"
          ],
          "additionalProperties": true
        }
      },
      "TurnInterrupt": {
        "name": "turn_interrupt",
        "payload": {
          "type": "object",
          "properties": {
            "type": {
              "const": "turn_interrupt"
            },
            "turnId": {
              "type": "string"
            }
          },
          "required": [
            "type"
          ],
          "additionalProperties": true
        }
      },
      "TurnInterruptSent": {
        "name": "turn_interrupt_sent",
        "payload": {
          "type": "object",
          "properties": {
            "type": {
              "const": "turn_interrupt_sent"
            },
            "worktreeId": {
              "type": "string"
            }
          },
          "required": [
            "type"
          ],
          "additionalProperties": true
        }
      },
      "TurnStarted": {
        "name": "turn_started",
        "payload": {
          "type": "object",
          "properties": {
            "type": {
              "const": "turn_started"
            },
            "worktreeId": {
              "type": "string"
            },
            "turnId": {
              "type": "string"
            },
            "threadId": {
              "type": "string"
            },
            "status": {
              "type": "string"
            },
            "provider": {
              "$ref": "#/components/schemas/Provider"
            }
          },
          "required": [
            "type",
            "turnId"
          ],
          "additionalProperties": true
        }
      },
      "TurnCompleted": {
        "name": "turn_completed",
        "payload": {
          "type": "object",
          "properties": {
            "type": {
              "const": "turn_completed"
            },
            "worktreeId": {
              "type": "string"
            },
            "turnId": {
              "type": "string"
            },
            "threadId": {
              "type": "string"
            },
            "status": {
              "type": "string"
            },
            "error": {
              "type": [
                "string",
                "null"
              ]
            },
            "provider": {
              "$ref": "#/components/schemas/Provider"
            }
          },
          "required": [
            "type",
            "turnId"
          ],
          "additionalProperties": true
        }
      },
      "TurnError": {
        "name": "turn_error",
        "payload": {
          "type": "object",
          "properties": {
            "type": {
              "const": "turn_error"
            },
            "worktreeId": {
              "type": "string"
            },
            "turnId": {
              "type": "string"
            },
            "threadId": {
              "type": "string"
            },
            "message": {
              "type": "string"
            },
            "willRetry": {
              "type": "boolean"
            },
            "provider": {
              "$ref": "#/components/schemas/Provider"
            }
          },
          "required": [
            "type",
            "message"
          ],
          "additionalProperties": true
        }
      },
      "AssistantDelta": {
        "name": "assistant_delta",
        "payload": {
          "type": "object",
          "properties": {
            "type": {
              "const": "assistant_delta"
            },
            "worktreeId": {
              "type": "string"
            },
            "delta": {
              "type": "string"
            },
            "itemId": {
              "type": "string"
            },
            "turnId": {
              "type": "string"
            },
            "provider": {
              "$ref": "#/components/schemas/Provider"
            }
          },
          "required": [
            "type",
            "delta"
          ],
          "additionalProperties": true
        }
      },
      "AssistantMessage": {
        "name": "assistant_message",
        "payload": {
          "type": "object",
          "properties": {
            "type": {
              "const": "assistant_message"
            },
            "worktreeId": {
              "type": "string"
            },
            "text": {
              "type": "string"
            },
            "itemId": {
              "type": "string"
            },
            "turnId": {
              "type": "string"
            },
            "provider": {
              "$ref": "#/components/schemas/Provider"
            }
          },
          "required": [
            "type",
            "text"
          ],
          "additionalProperties": true
        }
      },
      "CommandExecutionDelta": {
        "name": "command_execution_delta",
        "payload": {
          "type": "object",
          "properties": {
            "type": {
              "const": "command_execution_delta"
            },
            "worktreeId": {
              "type": "string"
            },
            "delta": {
              "type": "string"
            },
            "itemId": {
              "type": "string"
            },
            "turnId": {
              "type": "string"
            },
            "threadId": {
              "type": "string"
            },
            "provider": {
              "$ref": "#/components/schemas/Provider"
            }
          },
          "required": [
            "type",
            "delta"
          ],
          "additionalProperties": true
        }
      },
      "CommandExecutionCompleted": {
        "name": "command_execution_completed",
        "payload": {
          "type": "object",
          "properties": {
            "type": {
              "const": "command_execution_completed"
            },
            "worktreeId": {
              "type": "string"
            },
            "item": {
              "type": "object"
            },
            "itemId": {
              "type": "string"
            },
            "turnId": {
              "type": "string"
            },
            "provider": {
              "$ref": "#/components/schemas/Provider"
            }
          },
          "required": [
            "type",
            "itemId"
          ],
          "additionalProperties": true
        }
      },
      "ItemStarted": {
        "name": "item_started",
        "payload": {
          "type": "object",
          "properties": {
            "type": {
              "const": "item_started"
            },
            "worktreeId": {
              "type": "string"
            },
            "threadId": {
              "type": "string"
            },
            "turnId": {
              "type": "string"
            },
            "item": {
              "type": "object"
            },
            "provider": {
              "$ref": "#/components/schemas/Provider"
            }
          },
          "required": [
            "type",
            "item"
          ],
          "additionalProperties": true
        }
      },
      "RepoDiff": {
        "name": "repo_diff",
        "payload": {
          "type": "object",
          "properties": {
            "type": {
              "const": "repo_diff"
            },
            "status": {
              "type": "string"
            },
            "diff": {
              "type": "string"
            }
          },
          "required": [
            "type",
            "status",
            "diff"
          ],
          "additionalProperties": false
        }
      },
      "WorktreeReady": {
        "name": "worktree_ready",
        "payload": {
          "type": "object",
          "properties": {
            "type": {
              "const": "worktree_ready"
            },
            "worktreeId": {
              "type": "string"
            },
            "threadId": {
              "type": "string"
            },
            "provider": {
              "$ref": "#/components/schemas/Provider"
            }
          },
          "required": [
            "type",
            "worktreeId"
          ],
          "additionalProperties": true
        }
      },
      "WorktreeStatus": {
        "name": "worktree_status",
        "payload": {
          "type": "object",
          "properties": {
            "type": {
              "const": "worktree_status"
            },
            "worktreeId": {
              "type": "string"
            },
            "status": {
              "type": "string"
            },
            "error": {
              "type": "string"
            }
          },
          "required": [
            "type",
            "worktreeId",
            "status"
          ],
          "additionalProperties": true
        }
      },
      "WorktreeDiff": {
        "name": "worktree_diff",
        "payload": {
          "type": "object",
          "properties": {
            "type": {
              "const": "worktree_diff"
            },
            "worktreeId": {
              "type": "string"
            },
            "status": {
              "type": "string"
            },
            "diff": {
              "type": "string"
            }
          },
          "required": [
            "type",
            "worktreeId",
            "status",
            "diff"
          ],
          "additionalProperties": false
        }
      },
      "WorktreeCreated": {
        "name": "worktree_created",
        "payload": {
          "type": "object",
          "properties": {
            "type": {
              "const": "worktree_created"
            },
            "worktreeId": {
              "type": "string"
            },
            "name": {
              "type": "string"
            },
            "branchName": {
              "type": "string"
            },
            "provider": {
              "$ref": "#/components/schemas/Provider"
            },
            "status": {
              "type": "string"
            },
            "color": {
              "type": "string"
            }
          },
          "required": [
            "type",
            "worktreeId"
          ],
          "additionalProperties": true
        }
      },
      "WorktreeRemoved": {
        "name": "worktree_removed",
        "payload": {
          "type": "object",
          "properties": {
            "type": {
              "const": "worktree_removed"
            },
            "worktreeId": {
              "type": "string"
            }
          },
          "required": [
            "type",
            "worktreeId"
          ],
          "additionalProperties": false
        }
      },
      "WorktreeRenamed": {
        "name": "worktree_renamed",
        "payload": {
          "type": "object",
          "properties": {
            "type": {
              "const": "worktree_renamed"
            },
            "worktreeId": {
              "type": "string"
            },
            "name": {
              "type": "string"
            }
          },
          "required": [
            "type",
            "worktreeId",
            "name"
          ],
          "additionalProperties": false
        }
      },
      "ProviderSwitched": {
        "name": "provider_switched",
        "payload": {
          "type": "object",
          "properties": {
            "type": {
              "const": "provider_switched"
            },
            "provider": {
              "$ref": "#/components/schemas/Provider"
            },
            "models": {
              "type": "array",
              "items": {
                "type": "object"
              }
            },
            "messages": {
              "type": "array",
              "items": {
                "$ref": "#/components/schemas/Message"
              }
            },
            "threadId": {
              "type": "string"
            }
          },
          "required": [
            "type",
            "provider"
          ],
          "additionalProperties": true
        }
      },
      "ModelListRequest": {
        "name": "model_list",
        "payload": {
          "type": "object",
          "properties": {
            "type": {
              "const": "model_list"
            }
          },
          "required": [
            "type"
          ]
        }
      },
      "ModelListResponse": {
        "name": "model_list",
        "payload": {
          "type": "object",
          "properties": {
            "type": {
              "const": "model_list"
            },
            "models": {
              "type": "array",
              "items": {
                "type": "object"
              }
            },
            "provider": {
              "$ref": "#/components/schemas/Provider"
            }
          },
          "required": [
            "type",
            "models"
          ],
          "additionalProperties": true
        }
      },
      "ModelSetRequest": {
        "name": "model_set",
        "payload": {
          "type": "object",
          "properties": {
            "type": {
              "const": "model_set"
            },
            "model": {
              "type": [
                "string",
                "null"
              ]
            },
            "reasoningEffort": {
              "type": [
                "string",
                "null"
              ]
            }
          },
          "required": [
            "type"
          ],
          "additionalProperties": true
        }
      },
      "ModelSetResponse": {
        "name": "model_set",
        "payload": {
          "type": "object",
          "properties": {
            "type": {
              "const": "model_set"
            },
            "model": {
              "type": [
                "string",
                "null"
              ]
            },
            "reasoningEffort": {
              "type": [
                "string",
                "null"
              ]
            },
            "provider": {
              "$ref": "#/components/schemas/Provider"
            }
          },
          "required": [
            "type"
          ],
          "additionalProperties": true
        }
      },
      "AccountLoginStart": {
        "name": "account_login_start",
        "payload": {
          "type": "object",
          "properties": {
            "type": {
              "const": "account_login_start"
            },
            "provider": {
              "$ref": "#/components/schemas/Provider"
            },
            "params": {
              "type": "object"
            }
          },
          "required": [
            "type"
          ],
          "additionalProperties": true
        }
      },
      "AccountLoginStarted": {
        "name": "account_login_started",
        "payload": {
          "type": "object",
          "properties": {
            "type": {
              "const": "account_login_started"
            },
            "result": {
              "type": "object"
            },
            "provider": {
              "$ref": "#/components/schemas/Provider"
            }
          },
          "required": [
            "type",
            "result"
          ],
          "additionalProperties": true
        }
      },
      "AccountLoginError": {
        "name": "account_login_error",
        "payload": {
          "type": "object",
          "properties": {
            "type": {
              "const": "account_login_error"
            },
            "message": {
              "type": "string"
            }
          },
          "required": [
            "type",
            "message"
          ],
          "additionalProperties": true
        }
      },
      "AccountLoginCompleted": {
        "name": "account_login_completed",
        "payload": {
          "type": "object",
          "properties": {
            "type": {
              "const": "account_login_completed"
            },
            "success": {
              "type": "boolean"
            },
            "error": {
              "type": [
                "string",
                "null"
              ]
            },
            "loginId": {
              "type": [
                "string",
                "null"
              ]
            },
            "provider": {
              "$ref": "#/components/schemas/Provider"
            }
          },
          "required": [
            "type",
            "success"
          ],
          "additionalProperties": true
        }
      },
      "SwitchProvider": {
        "name": "switch_provider",
        "payload": {
          "type": "object",
          "properties": {
            "type": {
              "const": "switch_provider"
            },
            "provider": {
              "$ref": "#/components/schemas/Provider"
            }
          },
          "required": [
            "type",
            "provider"
          ],
          "additionalProperties": true
        }
      },
      "RpcLog": {
        "name": "rpc_log",
        "payload": {
          "type": "object",
          "properties": {
            "type": {
              "const": "rpc_log"
            },
            "entry": {
              "$ref": "#/components/schemas/RpcLogEntry"
            }
          },
          "required": [
            "type",
            "entry"
          ],
          "additionalProperties": true
        }
      },
      "TerminalClientToServer": {
        "oneOf": [
          {
            "$ref": "#/components/messages/TerminalInit"
          },
          {
            "$ref": "#/components/messages/TerminalResize"
          },
          {
            "$ref": "#/components/messages/TerminalInput"
          }
        ]
      },
      "TerminalServerToClient": {
        "oneOf": [
          {
            "$ref": "#/components/messages/TerminalOutput"
          },
          {
            "$ref": "#/components/messages/TerminalExit"
          }
        ]
      },
      "TerminalInit": {
        "name": "init",
        "payload": {
          "type": "object",
          "properties": {
            "type": {
              "const": "init"
            },
            "cols": {
              "type": "integer"
            },
            "rows": {
              "type": "integer"
            }
          },
          "required": [
            "type"
          ],
          "additionalProperties": true
        }
      },
      "TerminalResize": {
        "name": "resize",
        "payload": {
          "type": "object",
          "properties": {
            "type": {
              "const": "resize"
            },
            "cols": {
              "type": "integer"
            },
            "rows": {
              "type": "integer"
            }
          },
          "required": [
            "type",
            "cols",
            "rows"
          ],
          "additionalProperties": true
        }
      },
      "TerminalInput": {
        "name": "input",
        "payload": {
          "type": "object",
          "properties": {
            "type": {
              "const": "input"
            },
            "data": {
              "type": "string"
            }
          },
          "required": [
            "type",
            "data"
          ],
          "additionalProperties": false
        }
      },
      "TerminalOutput": {
        "name": "output",
        "payload": {
          "type": "object",
          "properties": {
            "type": {
              "const": "output"
            },
            "data": {
              "type": "string"
            }
          },
          "required": [
            "type",
            "data"
          ],
          "additionalProperties": false
        }
      },
      "TerminalExit": {
        "name": "exit",
        "payload": {
          "type": "object",
          "properties": {
            "type": {
              "const": "exit"
            },
            "code": {
              "type": "integer"
            }
          },
          "required": [
            "type",
            "code"
          ],
          "additionalProperties": false
        }
      }
    },
    "securitySchemes": {
      "BearerAuth": {
        "type": "http",
        "scheme": "bearer",
        "bearerFormat": "JWT"
      }
    }
  },
  "security": [
    {
      "BearerAuth": []
    }
  ]
}
